<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Generador de Apuntes desde PDF</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        body {
            font-family: "Segoe UI", sans-serif;
            background: #f5f6fa;
            margin: 0;
            padding: 0;
            color: #333;
        }

        header {
            background: #2c3e50;
            color: white;
            padding: 1.2rem;
            text-align: center;
        }

        .container {
            max-width: 800px;
            margin: 2rem auto;
            background: white;
            border-radius: 8px;
            padding: 2rem;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }

        h1 {
            margin-top: 0;
            text-align: center;
            font-size: 1.8rem;
        }

        label {
            display: block;
            margin-top: 1rem;
            font-weight: bold;
        }

        input, textarea, select {
            width: 100%;
            padding: 0.7rem;
            margin-top: 0.5rem;
            border: 1px solid #ccc;
            border-radius: 5px;
        }

        button {
            margin-top: 1.5rem;
            width: 100%;
            padding: 0.9rem;
            font-size: 1rem;
            background: #3498db;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        button:hover {
            background: #2980b9;
        }

        .output {
            margin-top: 2rem;
            background: #f0f0f0;
            padding: 1.5rem;
            border-radius: 8px;
            max-height: 400px;
            overflow-y: auto;
            white-space: pre-wrap;
            font-size: 1rem;
        }

        @media (max-width: 600px) {
            .container {
                margin: 1rem;
                padding: 1rem;
            }
        }
    </style>
</head>
<body>
    <header>
        <h2>üìò Generador de Apuntes desde PDF</h2>
    </header>
    <div class="container">
        <form id="pdfForm">
            <label for="pdf">Seleccionar PDF:</label>
            <input type="file" id="pdf" name="pdf" accept=".pdf" required>

            <label for="start">P√°gina de inicio:</label>
            <input type="number" id="start" name="start" required min="1">

            <label for="end">P√°gina final:</label>
            <input type="number" id="end" name="end" required min="1">

            <label for="step">Dividir de a cu√°ntas p√°ginas:</label>
            <input type="number" id="step" name="step" required min="1">

            <label for="prompt">Indicaci√≥n inicial para OpenAI:</label>
            <textarea id="prompt" name="prompt" rows="8">
                <!-- Voy a pasarte el texto de una novela, en fragmentos. Quiero que vayas construyendo a partir de eso un apunte completo en formato de texto fluido, como si fuera un ensayo o una explicaci√≥n narrativa, que me permita entender todo lo que pasa en la novela con profundidad y claridad. No quiero un resumen superficial ni vi√±etas. Tampoco quiero t√≠tulos, subt√≠tulos, ni apartados. Todo debe estar expresado en p√°rrafos de texto continuo, bien redactados, bien conectados, sin cortes.

El objetivo es que, al final, me quede un apunte del cual yo pueda estudiar la novela sin necesidad de leerla entera, pero entendiendo absolutamente todo lo que ocurre: qu√© pasa, por qu√© pasa, c√≥mo se relacionan los hechos, cu√°l es el trasfondo, qu√© motiva a los personajes, qu√© consecuencias tiene cada cosa, etc. Todo debe estar explicado con l√≥gica, coherencia y detalle, de modo que no quede nada colgado o sin sentido. Quiero que todo lo que escribas est√© conectado con lo que dijiste justo antes, generando un texto que fluya naturalmente.

A medida que te vaya pasando fragmentos, ten√©s que ir incorporando la informaci√≥n nueva al apunte de forma ordenada, detallada y comprensible. Siempre con la misma l√≥gica: profundidad, claridad, conexi√≥n y contexto.

No inventes ni completes con cosas que no est√°n en el texto, pero s√≠ pod√©s inferir lo que sea razonable a partir de lo le√≠do para que se entienda el porqu√© de cada cosa.

¬øEntendiste? Cuando te pase el primer fragmento, empez√° a construir el apunte. -->


Quiero que cuentes la historia de la novela como si me la estuvieras narrando vos a m√≠, de forma sencilla y f√°cil de entender. No quiero que uses palabras raras ni que parezca un an√°lisis de literatura. La idea es que me cuentes todo lo que pasa, por qu√© pasa y qu√© sienten o piensan los personajes, pero siempre con tus propias palabras, claras y directas.

Voy a pasarte la novela de a pedacitos. Cada vez que te d√© un pedazo, quiero que lo sumes a la historia que ya me est√°s contando. Asegurate de que todo tenga sentido junto, como si fuera un solo relato largo y fluido.

No inventes nada que no est√© en el texto, y no te salgas de la historia para explicar cosas. Simplemente, contame el cuento con lujo de detalles, pero sin complicaciones.

¬øQued√≥ claro ahora? Cuando quieras, pasame el primer fragmento y empezamos a desenrollar la historia.
                </textarea>
                

            <button type="submit">üì§ Procesar PDF y generar apunte</button>
        </form>

        <div class="output" id="output" style="display:none;"></div>
    </div>

    <script>
        document.getElementById("pdfForm").addEventListener("submit", function (e) {
            e.preventDefault();

            const formData = new FormData(this);
            const output = document.getElementById("output");
            output.style.display = "block";
            output.innerText = "‚è≥ Procesando... Por favor, esper√°...";

            fetch("/process", {
                method: "POST",
                body: formData
            })
                .then(response => response.json())
                .then(data => {
                    output.innerText = data.apunte;
                })
                .catch(error => {
                    output.innerText = "‚ùå Ocurri√≥ un error al procesar el PDF.";
                    console.error(error);
                });
        });
    </script>
</body>
</html>
